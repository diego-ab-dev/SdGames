<!DOCTYPE html>
{% load static %}
{% load custom_filters %}
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
  <link href="https://raw.githubusercontent.com/daneden/animate.css/master/animate.css" rel="stylesheet">
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

  <link href='https://cdn.jsdelivr.net/npm/boxicons@2.0.5/css/boxicons.min.css' rel='stylesheet'>
  <link rel="icon" type="image/png" href="{% static 'images/sdgameslogo.png' %}">
  <link rel="stylesheet" href="{% static 'styles/styles_menu.css' %}">
  <title>SD Games - Menu</title>
</head>

<body>

  <nav>
    <div class="navbar">
      <i class='bx bx-menu'></i>
      <div class="logo"><a href="/home">SD Games</a></div>
      <div class="nav-links">
        <div class="sidebar-logo">
          <span class="logo-name">SD Games</span>
          <i class='bx bx-x'></i>
        </div>
        <ul class="links">
          <li><a href="/home">Home</a></li>
          <li>
            <a href="#">Videojuegos</a>
            <i class='bx bxs-chevron-down htmlcss-arrow arrow  '></i>
            <ul class="htmlCss-sub-menu sub-menu">
              <li><span class="dropdown-header text-white text-start">PlayStation</span></li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Videojuegos PS3' %}">PlayStation
                  3</a></li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Videojuegos PS4' %}">PlayStation
                  4</a></li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Videojuegos PS5' %}">PlayStation
                  5</a></li>
              <hr>
              <li><span class="dropdown-header text-white text-start">Microsoft</span></li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Videojuegos XBOX 360' %}">XBOX
                  360</a></li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Videojuegos XBOX ONE' %}">XBOX
                  ONE</a></li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Videojuegos XBOX SERIES' %}">XBOX
                  SERIES</a></li>
              <hr>
              <li><span class="dropdown-header text-white text-start">Nintendo</span></li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Videojuegos Nintendo 3DS' %}">3DS</a>
              </li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Videojuegos WII' %}">WII</a></li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Videojuegos WII U' %}">WII U</a></li>
              <li><a class="dropdown-item"
                  href="{% url 'productos_por_categoria' 'Videojuegos Nintendo SWITCH' %}">SWITCH</a></li>
              <li><span class="dropdown-header text-white text-start">PC</span></li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Videojuegos para PC' %}">Videojuegos
                  PC</a></li>
            </ul>
          </li>
          <li>
            <a href="#">Consolas</a>
            <i class='bx bxs-chevron-down js-arrow arrow '></i>
            <ul class="js-sub-menu sub-menu">
              <li><span class="dropdown-header text-white text-start">PlayStation</span></li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Ps4 Consolas' %}">PLAYSTATION 4</a>
              </li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Ps5 Consolas' %}">PLAYSTATION 5</a>
              </li>
              <hr>
              <li><span class="dropdown-header text-white text-start">Microsoft</span></li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Xbox One Consolas' %}">XBOX ONE</a>
              </li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Xbox Series Consolas' %}">XBOX
                  SERIES</a></li>
              <hr>
              <li><span class="dropdown-header text-white text-start">Nintendo</span></li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Wii U Consolas' %}">WII U</a></li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Switch Consolas' %}">SWITCH</a></li>
            </ul>
          </li>
          <li>
            <a href="#">Accesorios</a>
            <i class='bx bxs-chevron-down js-arrow arrow '></i>
            <ul class="js-sub-menu sub-menu">
              <li><span class="dropdown-header text-white text-start">PlayStation</span></li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Accesorios Psp' %}">PSP</a></li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Accesorios Ps Vita' %}">VITA</a></li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Accesorios PS1' %}">PLAY STATION
                  1</a></li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Accesorios PS2' %}">PLAY STATION
                  2</a></li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Accesorios PS3' %}">PLAY STATION
                  3</a></li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Accesorios PS4' %}">PLAY STATION
                  4</a></li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Accesorios PS5' %}">PLAY STATION
                  5</a></li>
              <hr>
              <li><span class="dropdown-header text-white text-start">Microsoft</span></li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Accesorios XBOX 360' %}">XBOX 360</a>
              </li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Accesorios XBOX ONE' %}">XBOX ONE</a>
              </li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Accesorios XBOX SERIES' %}">XBOX
                  SERIES</a></li>
              <hr>
              <li><span class="dropdown-header text-white text-start">Nintendo</span></li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Accesorios Nintendo 3DS' %}">3DS</a>
              </li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Accesorios WII U' %}">WII U</a></li>
              <li><a class="dropdown-item"
                  href="{% url 'productos_por_categoria' 'Accesorios Nintendo SWITCH' %}">SWITCH</a></li>
            </ul>
          </li>
          <li>
            <a href="#">Figuras</a>
            <i class='bx bxs-chevron-down js-arrow arrow '></i>
            <ul class="js-sub-menu sub-menu">
              <li><span class="dropdown-header text-white text-start">Figuras Coleccionables</span></li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Figuras Funko' %}">FUNKO POP</a></li>
              <li><a class="dropdown-item" href="{% url 'productos_por_categoria' 'Figuras Amiibo' %}">AMIIBO</a></li>
            </ul>
          </li>
        </ul>
        <div class="sidebar-login">
          <button onclick="window.location.href='/login'">
            Iniciar Sesión
            <div class="arrow-wrapper">
              <div class="arrow"></div>
            </div>
          </button>
        </div>

      </div>

      <div class="d-flex login-desktop">
        {% if usuario %}
        <div class="menu">
          <div class="item">
            <a href="/perfil" class="link">
              <span> Mi Perfil </span>
              <svg viewBox="0 0 360 360" xml:space="preserve">
                <g id="SVGRepo_iconCarrier">
                  <path id="XMLID_225_"
                    d="M325.607,79.393c-5.857-5.857-15.355-5.858-21.213,0.001l-139.39,139.393L25.607,79.393 c-5.857-5.857-15.355-5.858-21.213,0.001c-5.858,5.858-5.858,15.355,0,21.213l150.004,150c2.813,2.813,6.628,4.393,10.606,4.393 s7.794-1.581,10.606-4.394l149.996-150C331.465,94.749,331.465,85.251,325.607,79.393z">
                  </path>
                </g>
              </svg>
            </a>
            <div class="submenu">
              <div class="submenu-item">
                <a href="/logout" class="submenu-link">Cerrar Sesión</a>
              </div>
            </div>
          </div>
        </div>
        {% else %}
        <button onclick="window.location.href='/login'">
          Iniciar Sesión
          <div class="arrow-wrapper">
            <div class="arrow"></div>
          </div>
        </button>
        {% endif %}
      </div>
      <div class="icons d-flex gap-3">
        <a href="/favorites" style="color: #9c9592;">
          <i class="fas fa-heart"></i>
        </a>
        <a href="{% url 'ver_carrito' %}" style="color: #9c9592;">
          <i class="fas fa-shopping-cart"></i>
        </a>
      </div>
      <div class="search-box">
        <i class='bx bx-search'></i>
        <div class="input-box">
          <form method="get" action="{% url 'productos_menu_vista' %}" class="d-flex mx-auto" role="search"
            style="width: 50%;">
            <input class="form-control me-2" type="text" placeholder="Buscar productos" aria-label="Search" id="name"
              name="buscar">
          </form>
        </div>
      </div>
    </div>
  </nav>



  <div id="myCarousel" class="carousel slide carousel-fade" data-ride="carousel">
    <div class="carousel-inner">
      <div class="carousel-item active">
        <div class="mask flex-center">
          <div class="container">
            <div class="row align-items-center">
              <div class="col-md-7 col-12 order-md-1 order-2">
                <h4 class="textcarrousel text-dark">Call of Duty <br>
                  Black Ops 6</h4>
                <p class="parrafos-carrousel text-dark">Prepárate para la adrenalina de Call of Duty: Black Ops 6. Vive
                  una experiencia de combate que no querrás dejar. ¡Consíguelo ahora!</p>
                {% if cod6 %}
                <a class="btn-comprar" href="{% url 'producto_detalle' cod6.id %}">COMPRAR</a>
                {% else %}
                <p class="parrafos-carrousel text-muted">Producto no disponible</p>
                {% endif %}
              </div>
              <div class="col-md-5 col-12 order-md-2 order-1">
                {% if cod6 %}
                <a href="{% url 'producto_detalle' cod6.id %}">
                  <img src="{% static 'images/cod6.png' %}" class="mx-auto"
                    style="filter: drop-shadow(0 0 10px rgba(0, 0, 0, .8));" alt="slide">
                </a>
                {% else %}
                <p class="parrafos-carrousel text-muted">Producto no disponible</p>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="carousel-item">
        <div class="mask flex-center">
          <div class="container">
            <div class="row align-items-center">
              <div class="col-md-7 col-12 order-md-1 order-2">
                <h4 class="textcarrousel text-dark">FC25</h4>
                <p class="parrafos-carrousel text-dark">¡Vive la emoción del fútbol como nunca antes con FC25! Llévate
                  el juego que todos
                  quieren y domina la cancha desde casa.</p>
                {% if fc25 %}
                <a class="btn-comprar" href="{% url 'producto_detalle' fc25.id %}">COMPRAR</a>
                {% else %}
                <p class="parrafos-carrousel text-muted">Producto no disponible</p>
                {% endif %}
              </div>
              <div class="col-md-5 col-12 order-md-2 order-1">
                {% if fc25 %}
                <a href="{% url 'producto_detalle' fc25.id %}">
                  <img src="{% static 'images/fc25.png' %}" class="mx-auto"
                    style="filter: drop-shadow(0 0 10px rgba(0, 0, 0, .8));" alt="slide">
                </a>
                {% else %}
                <p class="parrafos-carrousel text-muted">Producto no disponible</p>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="carousel-item">
        <div class="mask flex-center">
          <div class="container">
            <div class="row align-items-center">
              <div class="col-md-7 col-12 order-md-1 order-2">
                <h4 class="textcarrousel text-dark">Silent Hill 2</h4>
                <p class="parrafos-carrousel text-dark">Sumérgete en el terror psicológico de Silent Hill 2. Atrévete a
                  enfrentar tus miedos y descubre los oscuros secretos que te esperan.</p>
                {% if silent %}
                <a class="btn-comprar" href="{% url 'producto_detalle' silent.id %}">COMPRAR</a>
                {% else %}
                <p class="parrafos-carrousel text-muted">Producto no disponible</p>
                {% endif %}
              </div>
              <div class="col-md-5 col-12 order-md-2 order-1">
                {% if silent %}
                <a href="{% url 'producto_detalle' silent.id %}">
                  <img src="{% static 'images/silent.png' %}" class="mx-auto"
                    style="filter: drop-shadow(0 0 10px rgba(0, 0, 0, .8));" alt="slide">
                </a>
                {% else %}
                <p class="parrafos-carrousel text-muted">Producto no disponible</p>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      </div>
      <a class="carousel-control-prev" href="#myCarousel" role="button" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="carousel-control-next" href="#myCarousel" role="button" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>


      <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>


      <section class="section-products">
        <div class="container">
          <div class="row justify-content-center text-center">
            <div class="col-md-8 col-lg-6">
              <div class="header">
                <h2 class="anim-down display-6 fw-bold fst-italic text-center">Nuestros Productos</h2>
              </div>
            </div>
          </div>
          <div class="row">
            {% for producto in productos %}
              {% if producto.stock > 0 %}
                <div class="col-md-6 col-lg-4 col-xl-3">
                  <div id="product-4" class="single-product"
                    style="background-color: white; border-radius: 20px; padding: 20px;">
                    <div class="part-1">
                      <img src="{{ producto.imagen_principal.url }}" class="card-img-top" alt="{{ producto.nombre }}">
                      <span class="new">Tendencia</span>
                      <ul>
                        <li>
                          <form method="POST" action="{% url 'agregar_al_carrito' producto.id %}" style="display: inline;">
                            {% csrf_token %}
                            <input type="hidden" name="cantidad" value="1">
                            <button type="submit" class="btn-icon"><i class="fas fa-shopping-cart"></i></button>
                          </form>
                        </li>
                        <li>
                          <form method="POST" action="{% url 'agregar_favorito' producto.id %}" style="display: inline;">
                            {% csrf_token %}
                            <input type="hidden" name="cantidad" value="1">
                            <button type="submit" class="btn-icon"><i class="fas fa-heart"></i></button>
                          </form>
                          
                        </li>
                        <li>
                          <form method="POST" action="{% url 'producto_detalle' producto.id %}" style="display: inline;">
                            {% csrf_token %}
                            <input type="hidden" name="cantidad" value="1">
                            <button type="submit" class="btn-icon"><i class="fas fa-expand"></i></button>
                          </form>
                        </li>
                      </ul>
                    </div>
                    <div class="part-2">
                      <h3 class="product-title fw-bold fs-6">{{ producto.nombre }}</h3>
                      <h4 class="precioprod product-price fw-bold fs-4">${{ producto.precio|formato_chileno }}</h4>
                    </div>
                    <a href="{% url 'producto_detalle' producto.id %}" class="btn-detalles">Ver Detalles</a>
                  </div>
                </div>
              {% endif %}
            {% empty %}
            <p>No hay productos disponibles en este momento.</p>
            {% endfor %}
          </div>
        </div>
      </section>
      
      <div class="go-top-container">
        <div class="go-top-button">
          <img src="{% static 'images/navegar-flecha-hacia-arriba.png' %}" alt="">
        </div>
      </div>

      <script>
        window.onscroll = function () {
          console.log(document.documentElement.scrollTop);
          if (document.documentElement.scrollTop > 100) {
            document.querySelector('.go-top-container').classList.add('show');

          }
          else {
            document.querySelector('.go-top-container').classList.remove('show');
          }
        }

        document.querySelector('.go-top-container').addEventListener('click', () => {
          window.scrollTo({
            top: 0,
            behavior: 'smooth'
          });
        });

        function isVisible(elm) {
          var rect = elm.getBoundingClientRect();
          var viewHeight = Math.max(document.documentElement.clientHeight, window.innerHeight);
          return !(rect.bottom < 0 || rect.top - viewHeight >= 0);
        }

        window.addEventListener('DOMContentLoaded', (ev0) => {
          window.addEventListener('scroll', (ev1) => {
            document.querySelectorAll(".paused").forEach(elm => {
              if (isVisible(elm))
                elm.classList.remove("paused");
            })
          });
        });


        var myCarousel = document.querySelector('#myCarousel');
        var carousel = new bootstrap.Carousel(myCarousel, {
          interval: 3000,
          ride: 'carousel'
        });

        let navbar = document.querySelector(".navbar");
        let searchBox = document.querySelector(".search-box .bx-search");
        searchBox.addEventListener("click", () => {
          navbar.classList.toggle("showInput");
          if (navbar.classList.contains("showInput")) {
            searchBox.classList.replace("bx-search", "bx-x");
          } else {
            searchBox.classList.replace("bx-x", "bx-search");
          }
        });
        let navLinks = document.querySelector(".nav-links");
        let menuOpenBtn = document.querySelector(".navbar .bx-menu");
        let menuCloseBtn = document.querySelector(".nav-links .bx-x");
        menuOpenBtn.onclick = function () {
          navLinks.style.left = "0";
        }
        menuCloseBtn.onclick = function () {
          navLinks.style.left = "-100%";
        }
        let htmlcssArrow = document.querySelector(".htmlcss-arrow");
        htmlcssArrow.onclick = function () {
          navLinks.classList.toggle("show1");
        }
        let moreArrow = document.querySelector(".more-arrow");
        moreArrow.onclick = function () {
          navLinks.classList.toggle("show2");
        }
        let jsArrow = document.querySelector(".js-arrow");
        jsArrow.onclick = function () {
          navLinks.classList.toggle("show3");
        }
      </script>

      <footer class="text-center text-lg-start text-light">
        <section class="">
          <div class="container text-center text-md-start mt-5">
            <div class="row mt-3">
              <div class="col-md-3 col-lg-4 col-xl-3 mx-auto mb-4">
                <h6 class="text-uppercase fw-bold mb-4">
                  <a href="">SD Games</a>
                </h6>
                <p class="parrafo-footer">
                  SD Games es la tienda de videojuegos líder en Valdivia, que ofrece una amplia
                  selección de
                  títulos para todas las plataformas y edades. Desde los últimos lanzamientos hasta clásicos
                  retro,
                  SD Games tiene algo para cada tipo de jugador. La tienda se enorgullece de su equipo
                  experto, siempre
                  dispuesto a
                  recomendar juegos y a brindar un excelente servicio al cliente.
                </p>
              </div>
              <div class="col-md-2 col-lg-2 col-xl-2 mx-auto mb-4">
                <h6 class="text-uppercase fw-bold mb-4">
                  Enlaces Rápidos:
                </h6>
                <p>
                  <a href="#home" class="footerli text-reset">Home</a>
                </p>
                <p>
                  <a href="" class="footerli text-reset">Productos</a>
                </p>
                <p>
                  <a href="" class="footerli text-reset">Sobre Nosotros</a>
                </p>
                <p>
                  <a href="" class="footerli text-reset">Local</a>
                </p>
              </div>
              <div class="col-md-4 col-lg-3 col-xl-3 mx-auto mb-md-0 mb-4">
                <h6 class="text-uppercase fw-bold mb-4">Contacto:</h6>
                <p><i class="fas fa-home me-3"></i> Valdivia, Av. Simpson 641, Chile</p>
                <p>
                  <i class="fas fa-envelope me-3"></i>
                  sdgames@gmail.com
                </p>
                <p><i class="fas fa-phone me-3"></i> 9 2344 5674</p>
              </div>
            </div>
          </div>
        </section>
        <div class="text-center p-4" style="background-color: #8e8f94;">
          SD Games
        </div>
      </footer>

</body>

</html>